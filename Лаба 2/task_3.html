<html>
<head>
	<meta charset="utf-8" />
	<title></title>
	<link href="../Лаба 1/styles/button-back-style.css" rel="stylesheet" />
	<link href="styles.css" rel="stylesheet" />
    <style>
        body {
            font-family: 'Roboto Slab', serif;
            font-size: 20px;
        }
    </style>
</head>

<body>

	<script>
		function insert(num) {
			var exp = document.form.textView.value;
			var last_symbol = exp[exp.length-1]
			if (document.form.textView.value == "0" && num != "." && num != "+" && num != "-" && num != "*" && num != "/") {
				document.form.textView.value = "";
			}
			document.form.textView.value = document.form.textView.value + num;
			if (
			(last_symbol == "." || last_symbol == "+" || last_symbol == "-" || last_symbol == "*" || last_symbol == "/")
			&&
			(num == "." || num == "+" || num == "-" || num == "*" || num == "/")
			) {
				document.form.textView.value = exp.substring(0, exp.length-1);
				document.form.textView.value = document.form.textView.value + num;
			}
			if (num == ".") {
				var step;
				var flag = 0;
				for (step = 0; step < exp.length-1; step++) {
					if (exp[step] == ".") {
					flag = 1
					}
					if (exp[step] == "+" || exp[step] == "-" || exp[step] == "*" || exp[step] == "/") {
					flag = 0
					}
				}
				if (flag) {
				document.form.textView.value = exp.substring(0, document.form.textView.value.length-1);
				}
			}
		}
		function equal() {
			var exp = document.form.textView.value;
			if (exp) {
				if (document.form.textView.value != eval(document.form.textView.value)) {
					document.form.textView.value = eval(document.form.textView.value);
					document.getElementById('last_value').innerHTML = exp + "=" + document.form.textView.value
				}
				else {
					document.getElementById('last_value').innerHTML = document.form.textView.value
				}
			}
		}
		function c() {
			document.form.textView.value = "0";
		}
		function sign() {
			document.form.textView.value = eval(document.form.textView.value) * (-1);
		}
		function toPercent() {
			document.form.textView.value = eval(document.form.textView.value)/100;
		}
		function decrement() {
			document.form.textView.value = eval(document.form.textView.value) - 1;
		}
		function increment() {
			document.form.textView.value = eval(document.form.textView.value) + 1;
		}
		function backSpace() {
			if (document.form.textView.value.length-1 != 0) {
				var exp = document.form.textView.value;
				document.form.textView.value = exp.substring(0, exp.length-1);
			}
			else {
			document.form.textView.value = "0";
			}
		}
	</script>
	<center>
		<form name="form">
			<p id=last_value>0<p>
			<input class="input_txt" type="text" name="textView" autocomplete="off" value ="0" readonly/>
			<br>
			<br>
			<input class="btn" type="button" value="--" onclick="decrement()" />
			<input class="btn" type="button" value="++" onclick="increment()" />
			<input class="btn btn_backspace" type="button" value="Backspace" onclick="backSpace()" accesskey="Backspace" />
			<br>
			<br>
			<input class="btn" type="button" value="C" onclick="c()" accesskey="c" />
			<input class="btn" type="button" value="+/-" onclick="sign()" />
			<input class="btn" type="button" value="%" onclick="toPercent()" accesskey="%" />
			<input class="btn" type="button" value="/" onclick="insert('/')" accesskey="/" />
			<br>
			<br>
			<input class="btn" type="button" value="7" onclick="insert(7)" accesskey="7" />
			<input class="btn" type="button" value="8" onclick="insert(8)" accesskey="8" />
			<input class="btn" type="button" value="9" onclick="insert(9)" accesskey="9" />
			<input class="btn" type="button" value="*" onclick="insert('*')" accesskey="*" />
			<br>
			<br>
			<input class="btn" type="button" value="4" onclick="insert(4)" accesskey="4" />
			<input class="btn" type="button" value="5" onclick="insert(5)" accesskey="5" />
			<input class="btn" type="button" value="6" onclick="insert(6)"accesskey="6"  />
			<input class="btn" type="button" value="-" onclick="insert('-')" accesskey="-" />
			<br>
			<br>
			<input class="btn" type="button" value="1" onclick="insert(1)" accesskey="1" />
			<input class="btn" type="button" value="2" onclick="insert(2)" accesskey="2" />
			<input class="btn" type="button" value="3" onclick="insert(3)" accesskey="3" />
			<input class="btn" type="button" value="+" onclick="insert('+')" accesskey="+" />
			<br>
			<br>
			<input class="btn btn_zero" type="button" value="0" onclick="insert(0)" accesskey="0" />
			<input class="btn" type="button" value="." onclick="insert('.')" accesskey="." />
			<input class="btn" type="button" value="=" onclick="equal()" accesskey="=" />
			<br>
		</form>
	</center>

</body>

</html>